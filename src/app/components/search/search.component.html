<div class="search-container">
  <form class="search-form" (ngSubmit)="onSubmit()">
    <label for="nrpeople">Inimeste arv</label>
    <input type="number" name="nrpeople" id="nrpeople" [(ngModel)]="searchData.minCapacity">
    <label for="beginning_date">Alguskuupäev</label>
    <input type="date" id="beginning_date" name="beginning_date" [(ngModel)]="searchData.startDateTime">
    <label for="end_date">Lõpukuupäev</label>
    <input type="date" id="end_date" name="end_date" [(ngModel)]="searchData.endDateTime">
    <label for="floor">Korrus</label>
    <select name="floor" id="floor" [(ngModel)]="searchData.floor">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
    </select>
    <label for="keyword"></label>
    <input type="text" name="keyword" id="keyword" [(ngModel)]="searchData.keywords" placeholder="Otsingusõna">
    <button type="submit" class="search-button">Otsi ruume</button>
  </form>
</div>

@let rooms = rooms$ | async;

@if (isLoading) {
  <div>Laen...</div>
}

@if (error) {
  <div>{{ error }}</div>
}

<!--@if (rooms) {
  @if (rooms.length > 0) {
    <table class="filtered-rooms-table">
      <thead>
      <tr>
        <th>Ruumi nimi</th>
        <th>Ruumi number</th>
        <th>Mahutavus</th>
        <th>Korrus</th>
        <th>Vahendid</th>
        <th>Hind</th>
        <th>Märksõnad</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
        @for (room of rooms; track room.id) {
          <tr>
            <td>{{ room.roomName }}</td>
            <td>{{ room.roomNumber }}</td>
            <td>{{ room.capacity }}</td>
            <td>{{ room.floor }}</td>
            <td>{{ room.equipment }}</td>
            <td>{{ room.price }}</td>
            <td>{{ room.keywords }}</td>
            <td>
              <button>Broneeri</button>
            </td> &lt;!&ndash;(click)="bookRoom(room)&ndash;&gt;
          </tr>
        }
      </tbody>
    </table>
  } @else {
    <p>Ühtegi ruumi ei leitud vastavalt otsingule.</p>
  }
} @else {
  <p>Otsingutulemust ei ole veel.</p>
}-->

@if (rooms) {
  @if (rooms.length > 0) {
<div class="filtered-rooms-container">
    <div class="room-grid">
      @for (room of rooms; track room.id) {
        <div class="room-card">
          <h3>{{ room.roomName }}</h3>
          <p><strong>Ruumi number:</strong> {{ room.roomNumber }}</p>
          <p><strong>Mahutavus:</strong> {{ room.capacity }} inimest</p>
          <p><strong>Korrus:</strong> {{ room.floor }}</p>
          <p><strong>Vahendid:</strong> {{ room.equipment }}</p>
          <p><strong>Hind:</strong> {{ room.price }} €</p>
          <p><strong>Märksõnad:</strong> {{ room.keywords }}</p>
          <button class="book-button">Broneeri</button>
        </div>
      }
    </div>
    </div>
  } @else {
    <p>Ühtegi ruumi ei leitud vastavalt otsingule.</p>
  }
} @else {
  <p>Otsingutulemust ei ole veel.</p>
}
